(()=>{var e={};e.id=173,e.ids=[173,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>P,default:()=>m,getServerSideProps:()=>b,getStaticPaths:()=>h,getStaticProps:()=>g,reportWebVitals:()=>v,routeModule:()=>E,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>S});var a={};r.r(a),r.d(a,{default:()=>x});var s=r(7093),n=r(5244),i=r(1323),l=r(2899),o=r.n(l),u=r(1050),c=r(997),d=r(6689),p=r(9344),f=r(4131);function x(){let[e,t]=(0,d.useState)(""),[r,a]=(0,d.useState)("#60a5fa"),[s,n]=(0,d.useState)(""),[i,l]=(0,d.useState)(!1),[o,u]=(0,d.useState)(""),x=async t=>{t.preventDefault(),l(!0),u("");try{let t=await (0,p.ED)({name:e,avatar_url:s,color:r});window.location.href=`/profile/${t.id}`}catch(e){u("Errore nella creazione del profilo")}finally{l(!1)}};return c.jsx("main",{className:"min-h-screen flex flex-col items-center justify-center bg-background px-4 py-8",children:(0,c.jsxs)("form",{onSubmit:x,className:"w-full max-w-md mx-auto bg-white rounded-xl shadow p-6 flex flex-col gap-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-center",children:"Crea un nuovo profilo"}),c.jsx(f.Z,{profileId:e||"temp",onUpload:n}),s&&c.jsx("img",{src:s,alt:"avatar",className:"w-20 h-20 mx-auto rounded-full object-cover border"}),c.jsx("input",{type:"text",placeholder:"Nome",value:e,onChange:e=>t(e.target.value),className:"border rounded px-4 py-2 w-full focus:outline-none focus:ring focus:border-blue-400",required:!0}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm",children:"Colore profilo:"}),c.jsx("input",{type:"color",value:r,onChange:e=>a(e.target.value)})]}),c.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-primary text-white font-bold text-lg shadow hover:bg-primary/90 transition",disabled:i,children:i?"Creazione...":"Crea profilo"}),o&&c.jsx("div",{className:"text-center text-red-500",children:o})]})})}let m=(0,i.l)(a,"default"),g=(0,i.l)(a,"getStaticProps"),h=(0,i.l)(a,"getStaticPaths"),b=(0,i.l)(a,"getServerSideProps"),P=(0,i.l)(a,"config"),v=(0,i.l)(a,"reportWebVitals"),S=(0,i.l)(a,"unstable_getStaticProps"),y=(0,i.l)(a,"unstable_getStaticPaths"),w=(0,i.l)(a,"unstable_getStaticParams"),j=(0,i.l)(a,"unstable_getServerProps"),_=(0,i.l)(a,"unstable_getServerSideProps"),E=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/profile/new",pathname:"/profile/new",bundlePath:"",filename:""},components:{App:u.default,Document:o()},userland:a})},4131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(997),s=r(6689),n=r(9344);function i({profileId:e,onUpload:t}){let r=(0,s.useRef)(),[i,l]=(0,s.useState)(!1),[o,u]=(0,s.useState)(""),c=async r=>{let a=r.target.files[0];if(a){l(!0),u("");try{let r=`${e}_${Date.now()}`;await (0,n.gg)(a,r);let s=(0,n.E$)(r);t(s)}catch(e){u("Errore upload foto")}finally{l(!1)}}};return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("input",{type:"file",accept:"image/*",ref:r,onChange:c,className:"hidden"}),a.jsx("button",{className:"px-3 py-1 bg-primary text-white rounded shadow hover:bg-primary/80",onClick:()=>r.current.click(),disabled:i,type:"button",children:i?"Caricamento...":"Carica foto profilo"}),o&&a.jsx("span",{className:"text-red-500 text-xs",children:o})]})}},1050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(997);r(6764);let s=require("next/head");var n=r.n(s);function i({Component:e,pageProps:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[a.jsx("title",{children:"Gestione Spese di Coppia"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),a.jsx(e,{...t})]})}},9344:(e,t,r)=>{"use strict";r.d(t,{Fl:()=>l,ED:()=>s,E$:()=>i,gg:()=>n});let a=(0,require("@supabase/supabase-js").createClient)("your_supabase_url","your_supabase_anon_key");async function s({name:e,avatar_url:t,color:r}){let{data:s,error:n}=await a.from("profiles").insert([{name:e,avatar_url:t,color:r}]).select().single();if(n)throw n;return s}async function n(e,t){let{data:r,error:s}=await a.storage.from("avatars").upload(t,e,{upsert:!0});if(s)throw s;return r}function i(e){return a.storage.from("avatars").getPublicUrl(e).data.publicUrl}async function l(e){let{data:t,error:r}=await a.from("expenses").insert([e]).select().single();if(r)throw r;return t}},6764:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5315:e=>{"use strict";e.exports=require("path")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[899],()=>r(7523));module.exports=a})();