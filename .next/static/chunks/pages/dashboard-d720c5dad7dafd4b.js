(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(8170)}])},8170:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),s=n(7294),a=n(1822);function l(){let[e,t]=(0,s.useState)([]),[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{Promise.all([(0,a.cp)(),(0,a.T4)()]).then(e=>{let[n,r]=e;t(n),l(r)}).finally(()=>o(!1))},[]),i)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Caricamento dashboard..."});let c={};return e.forEach(e=>c[e.id]=0),n.forEach(e=>{e.profile_id&&void 0!==c[e.profile_id]&&(c[e.profile_id]+=parseFloat(e.amount))}),(0,r.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center bg-background px-4 py-8",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl mx-auto bg-white rounded-xl shadow p-6 flex flex-col gap-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:"Dashboard Spese Totali"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 bg-gray-50 rounded-lg p-4 shadow-inner",children:[(0,r.jsx)("img",{src:e.avatar_url||"/avatar1.png",alt:e.name,className:"w-16 h-16 rounded-full object-cover border"}),(0,r.jsx)("span",{className:"font-semibold text-lg",children:e.name}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["€ ",(null===(t=c[e.id])||void 0===t?void 0:t.toFixed(2))||"0.00"]})]},e.id)})}),(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tutte le spese"}),(0,r.jsx)("ul",{className:"flex flex-col gap-2 max-h-64 overflow-y-auto",children:n.map(e=>(0,r.jsxs)("li",{className:"flex justify-between items-center bg-gray-100 rounded-lg px-3 py-2",children:[(0,r.jsx)("span",{children:e.desc}),(0,r.jsxs)("span",{className:"font-bold",children:["€ ",parseFloat(e.amount).toFixed(2)]})]},e.id))})]})]})})}},1822:function(e,t,n){"use strict";n.d(t,{Fl:function(){return c},ED:function(){return a},E$:function(){return i},T4:function(){return o},cp:function(){return s},gg:function(){return l}});let r=(0,n(8967).eI)("your_supabase_url","your_supabase_anon_key");async function s(){let{data:e,error:t}=await r.from("profiles").select("*").order("id");if(t)throw t;return e}async function a(e){let{name:t,avatar_url:n,color:s}=e,{data:a,error:l}=await r.from("profiles").insert([{name:t,avatar_url:n,color:s}]).select().single();if(l)throw l;return a}async function l(e,t){let{data:n,error:s}=await r.storage.from("avatars").upload(t,e,{upsert:!0});if(s)throw s;return n}function i(e){return r.storage.from("avatars").getPublicUrl(e).data.publicUrl}async function o(){let{data:e,error:t}=await r.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e}async function c(e){let{data:t,error:n}=await r.from("expenses").insert([e]).select().single();if(n)throw n;return t}}},function(e){e.O(0,[967,888,774,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);